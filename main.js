!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){var r=n.items,o=n.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._items=Array.from(r),this._renderer=o,this._container=document.querySelector(e)}var n,r;return n=t,(r=[{key:"constructItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),r(this,"_handleOverlayClose",(function(e){e.target===n._popupElement&&n.close()})),r(this,"_handleButtonClose",(function(){n.close()})),this._popupElement=document.querySelector(t)}var t,o;return t=e,(o=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("click",this._handleOverlayClose),this._popupElement.querySelector(".popup__close-button").addEventListener("click",this._handleButtonClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("click",this._handleOverlayClose),this._popupElement.querySelector(".popup__close-button").removeEventListener("click",this._handleButtonClose)}}])&&n(t.prototype,o),e}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},s(e,t,n||e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function c(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(f,e);var t,n,r,o,i=(r=f,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(r);if(o){var n=l(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return c(this,e)});function f(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),i.call(this,e)}return t=f,(n=[{key:"open",value:function(e,t){s(l(f.prototype),"open",this).call(this),this._popupElement.querySelector(".popup__caption").textContent=e,this._popupElement.querySelector(".popup__image").src=t,this._popupElement.querySelector(".popup__image").alt=e}}])&&u(t.prototype,n),f}(o);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},_(e,t,n||e)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function d(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(r);if(o){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function u(e,t){var n,r,o,s,a=t.submitHandler;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),s=function(){n.renderProgress(!0),n._submitHandler(n._getInputValues())},(o="_submitThisForm")in(r=y(n=i.call(this,e)))?Object.defineProperty(r,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[o]=s,n._submitHandler=a,n._formElement=n._popupElement.querySelector(".popup__form"),n._submitButton=n._popupElement.querySelector(".popup__submit"),n._submitButton.value=n._submitButton.textContent,n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=Array.from(this._formElement.querySelectorAll(".popup__input")),t={};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"renderProgress",value:function(e){this._submitButton.textContent=e?"Saving...":this._submitButton.value}},{key:"close",value:function(){_(v(u.prototype),"close",this).call(this),this._formElement.reset()}},{key:"setEventListeners",value:function(){this._formElement.addEventListener("submit",this._submitThisForm)}}])&&h(t.prototype,n),u}(o);function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var k=function(){function e(t){var n=t.userNameSelector,r=t.userAboutSelector,o=t.userImageSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userNameElement=document.querySelector(n),this._userAboutElement=document.querySelector(r),this._userImageElement=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userNameElement.textContent,about:this._userAboutElement.textContent,avatar:this._userImageElement.src}}},{key:"setUserInfo",value:function(e){this._userNameElement.textContent=e.name,this._userAboutElement.textContent=e.about,this._userImageElement.src=e.avatar}}])&&g(t.prototype,n),e}();function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t,n,r,o){var i=o.handleCardClick,u=o.handleBinClick,s=o.handleAddLike,a=o.handleRemoveLike;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._link=n.link,this._name=n.name,this._cardSelector=r,this._handleCardClick=i,this._handleBinClick=u,this._handleAddLike=s,this._handleRemoveLike=a,this._cardID=n._id,this._cardOwnerID=n.owner._id,this._likes=n.likes,this._userID=t}var t,n;return t=e,(n=[{key:"_getCardTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".elements__item").cloneNode(!0)}},{key:"generateCard",value:function(){var e=this;return this._item=this._getCardTemplate(),this._setEventListeners(),this._item.querySelector(".elements__image").src=this._link,this._item.querySelector(".elements__image").alt=this._name,this._item.querySelector(".elements__title").textContent=this._name,this._item.querySelector(".elements__like-counter").textContent=this._likes.length,this._cardOwnerID===this._userID&&this._item.querySelector(".elements__delete-button").classList.add("elements__delete-button_active"),this._likes.some((function(t){return t._id===e._userID}))&&this.toggleLike(this._likes.length),this._item}},{key:"toggleLike",value:function(e){this._item.querySelector(".elements__like-button").classList.toggle("elements__like-button_active"),this._item.querySelector(".elements__like-counter").textContent=e}},{key:"deleteCard",value:function(){this._item.remove(),this._item=null}},{key:"_setEventListeners",value:function(){var e=this;this._item.querySelector(".elements__image").addEventListener("click",(function(){return e._handleCardClick(e._name,e._link)})),this._item.querySelector(".elements__delete-button").addEventListener("click",(function(){return e._handleBinClick(e._cardID)})),this._item.querySelector(".elements__like-button").addEventListener("click",(function(){e._item.querySelector(".elements__like-button").classList.contains("elements__like-button_active")?e._handleRemoveLike(e._cardID):e._handleAddLike(e._cardID)}))}}])&&E(t.prototype,n),e}();function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._submitButtonInactiveClass=t.submitButtonInactiveClass,this._inputErrorClass=t.inputErrorClass,this._errorMessageClassActive=t.errorMessageClassActive,this._formElement=n,this._submitButton=this._formElement.querySelector(t.submitButtonSelector),this._inputList=Array.from(this._formElement.querySelectorAll(t.inputSelector)),this._errorList=Array.from(this._formElement.querySelectorAll(t.errorMessageSelector))}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),n.textContent=t,n.classList.add(this._errorMessageClassActive)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorMessageClassActive),t.textContent=""}},{key:"_checkInputsValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_checkFormInvalidity",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"toggleSubmitState",value:function(){this._checkFormInvalidity()?(this._submitButton.classList.add(this._submitButtonInactiveClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._submitButtonInactiveClass),this._submitButton.disabled=!1)}},{key:"_setFormState",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputsValidity(t),e.toggleSubmitState()}))}))}},{key:"clearValidationErrors",value:function(){var e=this;this._inputList.forEach((function(t){return t.classList.remove(e._inputErrorClass)})),this._errorList.forEach((function(t){t.classList.remove(e._errorMessageClassActive),t.textContent=""}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setFormState()}}])&&w(t.prototype,n),e}();function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function P(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(o){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return P(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._formElement=t._popupElement.querySelector(".popup__form"),t}return t=u,(n=[{key:"submitRequest",value:function(e){this._initiateSubmit=e}},{key:"setEventListeners",value:function(){var e=this;this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._initiateSubmit()}))}}])&&I(t.prototype,n),u}(o);function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B,T,A=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject(e.statusText)}},{key:"getProfileInfo",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"getServerImages",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"setProfileInfo",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e.fullName,about:e.about})}).then((function(e){return t._checkResponse(e)}))}},{key:"addNewImage",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({name:e.imageTitle,link:e.imageLink})}).then((function(e){return t._checkResponse(e)}))}},{key:"deleteImage",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{headers:this._headers,method:"DELETE"}).then((function(e){return t._checkResponse(e)}))}},{key:"likeCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"PUT"}).then((function(e){return t._checkResponse(e)}))}},{key:"unLikeCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{headers:this._headers,method:"DELETE"}).then((function(e){return t._checkResponse(e)}))}},{key:"editProfileImage",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e.avatarLink})}).then((function(e){return t._checkResponse(e)}))}}])&&R(t.prototype,n),e}(),x=document.querySelector(".profile__edit-profile"),D=document.querySelector(".profile__edit-image"),U=document.querySelector(".profile__add-photo"),N=document.querySelector(".popup__form"),V=N.querySelector(".popup__input_content_full-name"),M=N.querySelector(".popup__input_content_about"),H={inputSelector:".popup__input",submitButtonSelector:".popup__submit",errorMessageSelector:".popup__input-error-msg",submitButtonInactiveClass:"popup__submit_inactive",inputErrorClass:"popup__input_type_error",errorMessageClass:"popup__input-error-msg",errorMessageClassActive:"popup__input-error-msg_active"},F=document.querySelector(".popup__profile-form"),J=document.querySelector(".popup__edit-profile-image-form"),z=document.querySelector(".popup__add-image-form"),G=new C(H,F),K=new C(H,J),Q=new C(H,z);G.enableValidation(),K.enableValidation(),Q.enableValidation();var W=new A({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"f21cbaab-48ba-469f-bdb9-c2956aed6b6b","Content-Type":"application/json"}});W.getProfileInfo().then((function(e){ne.setUserInfo(e),B=e._id,W.getServerImages().then((function(e){(T=new t(".elements",{items:e,renderer:function(e){T.addItem($(e))}})).constructItems()})).catch((function(e){return console.log("Error from getServerImages:",e)}))})).catch((function(e){return console.log("Error from getProfileInfo:",e)}));var X=new j(".popup_alert-delete");X.setEventListeners();var Y=new f(".popup_large-image");function Z(e,t){Y.open(e,t)}function $(e){var t=new S(B,e,"#image-template",{handleCardClick:Z,handleAddLike:function(e){W.likeCard(e).then((function(e){t.toggleLike(e.likes.length)})).catch((function(e){return console.log("Error from likeCard:",e)}))},handleRemoveLike:function(e){W.unLikeCard(e).then((function(e){t.toggleLike(e.likes.length)})).catch((function(e){return console.log("Error from unLikeCard:",e)}))},handleBinClick:function(e){X.open(),X.submitRequest((function(){W.deleteImage(e).then((function(e){t.deleteCard(),X.close()})).catch((function(e){return console.log("Error from deleteImage:",e)}))}))}});return t.generateCard()}var ee=new b(".popup_add-image",{submitHandler:function(e){W.addNewImage(e).then((function(e){T.addItem($(e)),ee.close()})).catch((function(e){return console.log("Error from addNewImage:",e)})).finally((function(){return ee.renderProgress(!1)}))}}),te=new b(".popup_edit-profile-image",{submitHandler:function(e){W.editProfileImage(e).then((function(e){ne.setUserInfo(e),te.close()})).catch((function(e){return console.log("Error from editProfileImage:",e)})).finally((function(){return te.renderProgress(!1)}))}});te.setEventListeners(),D.addEventListener("click",(function(){K.clearValidationErrors(),K.toggleSubmitState(),te.open()})),ee.setEventListeners(),U.addEventListener("click",(function(){Q.clearValidationErrors(),Q.toggleSubmitState(),ee.open()}));var ne=new k({userNameSelector:".profile__name",userAboutSelector:".profile__occupation",userImageSelector:".profile__image"}),re=new b(".popup_profile",{submitHandler:function(e){W.setProfileInfo(e).then((function(e){ne.setUserInfo(e),re.close()})).catch((function(e){return console.log("Error from setProfileInfo:",e)})).finally((function(){return re.renderProgress(!1)}))}});re.setEventListeners(),x.addEventListener("click",(function(){var e=ne.getUserInfo();V.value=e.name,M.value=e.about,G.clearValidationErrors(),G.toggleSubmitState(),re.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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a0JBQW1CLG9CQUdmaUosR0FBdUIsSUFBSW5LLEVBQWMsaUJBQWtCLENBQy9EQyxjQUFlLFNBQUNtSyxHQUNkbEMsRUFBSW1DLGVBQWVELEdBQ2xCM0QsTUFBSyxTQUFDUCxHQUNMbUMsR0FBU0MsWUFBWXBDLEdBQ3JCaUUsR0FBcUJwTCxXQUV0QjZKLE9BQU0sU0FBQ3RELEdBQUQsT0FBV3VELFFBQVFDLElBQUksNkJBQThCeEQsTUFDM0R5RSxTQUFRLGtCQUFNSSxHQUFxQmpLLGdCQUFlLFNBSXZEaUssR0FBcUJuQixvQkFFckI1QixFQUFlaEksaUJBQWlCLFNBQVMsV0FDdkMsSUFBTWtMLEVBQWNqQyxHQUFTa0MsY0FDN0IvQyxFQUFjakgsTUFBUStKLEVBQVkzSyxLQUNsQzhILEVBQWVsSCxNQUFRK0osRUFBWWhKLE1BRW5Dd0csRUFBeUJvQyx3QkFDekJwQyxFQUF5QnpDLG9CQUV6QjhFLEdBQXFCaEIsVSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cEFsZXJ0RGVsZXRlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoY29udGFpbmVyU2VsZWN0b3IsIHsgaXRlbXMsIHJlbmRlcmVyIH0pIHtcbiAgICB0aGlzLl9pdGVtcyA9IEFycmF5LmZyb20oaXRlbXMpO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG5cbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIGNvbnN0cnVjdEl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUJ1dHRvbkNsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQnV0dG9uQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIF9oYW5kbGVPdmVybGF5Q2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC50YXJnZXQgPT09IHRoaXMuX3BvcHVwRWxlbWVudCkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBfaGFuZGxlQnV0dG9uQ2xvc2UgPSAoKSA9PiB7XG4gICAgdGhpcy5jbG9zZSgpO1xuICB9O1xufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbihuYW1lLCBsaW5rKSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIFxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIikuc3JjID0gbGluaztcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIikuYWx0ID0gbmFtZTtcbiAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCB7IHN1Ym1pdEhhbmRsZXIgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5fc3VibWl0SGFuZGxlciA9IHN1Ym1pdEhhbmRsZXI7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fc3VibWl0XCIpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi52YWx1ZSA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dHNMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKSk7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgICBcbiAgICBpbnB1dHNMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuIFxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuXG4gIHJlbmRlclByb2dyZXNzKHJlc3VsdCkge1xuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uLnZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG5cbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xuICB9XG5cbiAgX3N1Ym1pdFRoaXNGb3JtID0gKCkgPT4ge1xuICAgIHRoaXMucmVuZGVyUHJvZ3Jlc3ModHJ1ZSk7XG4gICAgdGhpcy5fc3VibWl0SGFuZGxlcih0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5fc3VibWl0VGhpc0Zvcm0pO1xuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJBYm91dFNlbGVjdG9yLCB1c2VySW1hZ2VTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fdXNlck5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VyQWJvdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQWJvdXRTZWxlY3Rvcik7XG4gICAgdGhpcy5fdXNlckltYWdlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckltYWdlU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgY29uc3QgdXNlckluZm8gPSB7XG4gICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fdXNlckFib3V0RWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGF2YXRhcjogdGhpcy5fdXNlckltYWdlRWxlbWVudC5zcmNcbiAgICB9O1xuXG4gICAgcmV0dXJuIHVzZXJJbmZvO1xuICB9XG5cbiAgc2V0VXNlckluZm8odXNlckRhdGEpIHtcbiAgICB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5uYW1lO1xuICAgIHRoaXMuX3VzZXJBYm91dEVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5hYm91dDtcbiAgICB0aGlzLl91c2VySW1hZ2VFbGVtZW50LnNyYyA9IHVzZXJEYXRhLmF2YXRhcjtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuY29uc3RydWN0b3IodXNlcklELCBkYXRhLCBjYXJkU2VsZWN0b3IsIHsgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVCaW5DbGljaywgaGFuZGxlQWRkTGlrZSwgaGFuZGxlUmVtb3ZlTGlrZSB9KSB7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcblxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVCaW5DbGljayA9IGhhbmRsZUJpbkNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZUFkZExpa2UgPSBoYW5kbGVBZGRMaWtlO1xuICAgIHRoaXMuX2hhbmRsZVJlbW92ZUxpa2UgPSBoYW5kbGVSZW1vdmVMaWtlO1xuXG4gICAgdGhpcy5fY2FyZElEID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fY2FyZE93bmVySUQgPSBkYXRhLm93bmVyLl9pZDtcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG5cbiAgICB0aGlzLl91c2VySUQgPSB1c2VySUQ7XG4gIH1cblxuICBfZ2V0Q2FyZFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19pdGVtXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgcmV0dXJuIGNhcmRUZW1wbGF0ZTtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9pdGVtID0gdGhpcy5fZ2V0Q2FyZFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2l0ZW0ucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19faW1hZ2VcIikuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9pdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2ltYWdlXCIpLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5faXRlbS5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgXG4gICAgdGhpcy5faXRlbS5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19saWtlLWNvdW50ZXJcIikudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG5cbiAgICBpZiAodGhpcy5fY2FyZE93bmVySUQgPT09IHRoaXMuX3VzZXJJRCkge1xuICAgICAgdGhpcy5faXRlbS5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19kZWxldGUtYnV0dG9uXCIpLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50c19fZGVsZXRlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfVxuXG4gICAgY29uc3QgY2FyZElzTGlrZWQgPSB0aGlzLl9saWtlcy5zb21lKChzb21lTGlrZSkgPT4geyByZXR1cm4gc29tZUxpa2UuX2lkID09PSB0aGlzLl91c2VySUQgfSk7XG4gICAgaWYgKGNhcmRJc0xpa2VkKSB7IHRoaXMudG9nZ2xlTGlrZSh0aGlzLl9saWtlcy5sZW5ndGgpOyB9XG5cbiAgICByZXR1cm4gdGhpcy5faXRlbTtcbiAgfVxuXG4gIHRvZ2dsZUxpa2UobGlrZXNOdW1iZXIpIHtcbiAgICB0aGlzLl9pdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2xpa2UtYnV0dG9uXCIpLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50c19fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIHRoaXMuX2l0ZW0ucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlrZS1jb3VudGVyXCIpLnRleHRDb250ZW50ID0gbGlrZXNOdW1iZXI7XG4gIH1cblxuICBkZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2l0ZW0ucmVtb3ZlKCk7XG4gICAgdGhpcy5faXRlbSA9IG51bGw7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faXRlbS5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19pbWFnZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspKTtcbiAgICB0aGlzLl9pdGVtLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2RlbGV0ZS1idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuX2hhbmRsZUJpbkNsaWNrKHRoaXMuX2NhcmRJRCkpO1xuICAgIFxuICAgIHRoaXMuX2l0ZW0ucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlrZS1idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5zTGlrZSA9IHRoaXMuX2l0ZW0ucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fbGlrZS1idXR0b25cIikuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZWxlbWVudHNfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICAgIGlmICggY29udGFpbnNMaWtlIClcbiAgICAgIHtcbiAgICAgICAgdGhpcy5faGFuZGxlUmVtb3ZlTGlrZSh0aGlzLl9jYXJkSUQpO1xuICAgICAgfVxuICAgICAgZWxzZVxuICAgICAge1xuICAgICAgICB0aGlzLl9oYW5kbGVBZGRMaWtlKHRoaXMuX2NhcmRJRCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoZm9ybXNTZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25JbmFjdGl2ZUNsYXNzID0gZm9ybXNTZXR0aW5ncy5zdWJtaXRCdXR0b25JbmFjdGl2ZUNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGZvcm1zU2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUNsYXNzQWN0aXZlID0gZm9ybXNTZXR0aW5ncy5lcnJvck1lc3NhZ2VDbGFzc0FjdGl2ZTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoZm9ybXNTZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGZvcm1zU2V0dGluZ3MuaW5wdXRTZWxlY3RvcikpO1xuICAgIHRoaXMuX2Vycm9yTGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChmb3Jtc1NldHRpbmdzLmVycm9yTWVzc2FnZVNlbGVjdG9yKSk7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvck1lc3NhZ2VDbGFzc0FjdGl2ZSk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvck1lc3NhZ2VDbGFzc0FjdGl2ZSk7XG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIF9jaGVja0lucHV0c1ZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgX2NoZWNrRm9ybUludmFsaWRpdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgdG9nZ2xlU3VibWl0U3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2NoZWNrRm9ybUludmFsaWRpdHkoKSkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fc3VibWl0QnV0dG9uSW5hY3RpdmVDbGFzcyk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zdWJtaXRCdXR0b25JbmFjdGl2ZUNsYXNzKTtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRGb3JtU3RhdGUoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRzVmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy50b2dnbGVTdWJtaXRTdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBjbGVhclZhbGlkYXRpb25FcnJvcnMoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcykpO1xuICAgIHRoaXMuX2Vycm9yTGlzdC5mb3JFYWNoKChlcnJvcikgPT4ge1xuICAgICAgZXJyb3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvck1lc3NhZ2VDbGFzc0FjdGl2ZSk7XG4gICAgICBlcnJvci50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4geyBldnQucHJldmVudERlZmF1bHQoKTsgfSk7XG4gICAgdGhpcy5fc2V0Rm9ybVN0YXRlKCk7XG4gIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBBbGVydERlbGV0ZSBleHRlbmRzIFBvcHVwIHtcblx0Y29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuXHRcdFxuXHRcdHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gIH1cblxuICBzdWJtaXRSZXF1ZXN0KHNlcnZlclJlc3BvbnNlKSB7XG5cdFx0dGhpcy5faW5pdGlhdGVTdWJtaXQgPSBzZXJ2ZXJSZXNwb25zZTtcblx0fVxuXG5cdHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuXHRcdFx0ZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR0aGlzLl9pbml0aWF0ZVN1Ym1pdCgpO1xuXHRcdH0pO1xuICB9XG59IiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBQb3B1cEFsZXJ0RGVsZXRlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwQWxlcnREZWxldGUuanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCJcblxuaW1wb3J0IHtcbiAgZm9ybXNTZXR0aW5ncyxcbiAgZWRpdFByb2ZpbGVCdG4sXG4gIGVkaXRQcm9maWxlSW1hZ2VCdG4sXG4gIGFkZEltYWdlQnRuLFxuICB1c2VyTmFtZUlucHV0LFxuICB1c2VyQWJvdXRJbnB1dCxcbiAgcHJvZmlsZUZvcm1FbGVtZW50LFxuICBwcm9maWxlSW1hZ2VGb3JtRWxlbWVudCxcbiAgaW1hZ2VGb3JtRWxlbWVudCxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5jb25zdCBlZGlkUHJvZmlsZWZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3Jtc1NldHRpbmdzLCBwcm9maWxlRm9ybUVsZW1lbnQpO1xuY29uc3QgZWRpZFByb2ZpbGVJbWFnZWZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3Jtc1NldHRpbmdzLCBwcm9maWxlSW1hZ2VGb3JtRWxlbWVudCk7XG5jb25zdCBhZGRJbWFnZWZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3Jtc1NldHRpbmdzLCBpbWFnZUZvcm1FbGVtZW50KTtcblxuZWRpZFByb2ZpbGVmb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmVkaWRQcm9maWxlSW1hZ2Vmb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEltYWdlZm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmxldCB1c2VySUQ7XG5sZXQgc2VydmVyO1xuXG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiZjIxY2JhYWItNDhiYS00NjlmLWJkYjktYzI5NTZhZWQ2YjZiXCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgfVxufSk7XG5cbmFwaS5nZXRQcm9maWxlSW5mbygpXG4udGhlbigocmVzKSA9PiB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcyk7XG4gIHVzZXJJRCA9IHJlcy5faWQ7XG5cbiAgYXBpLmdldFNlcnZlckltYWdlcygpXG4gIC50aGVuKChyZXMpID0+IHtcbiAgICBzZXJ2ZXIgPSBuZXcgU2VjdGlvbihcIi5lbGVtZW50c1wiLFxuICAgICAge1xuICAgICAgICBpdGVtczogcmVzLFxuICAgICAgICByZW5kZXJlcjogKGltYWdlSXRlbSkgPT4ge1xuICAgICAgICAgIHNlcnZlci5hZGRJdGVtKGdlbmVyYXRlQ2FyZFdpdGhJbWFnZShpbWFnZUl0ZW0pKTtcbiAgICAgICAgfSBcbiAgICB9KTtcbiAgICBzZXJ2ZXIuY29uc3RydWN0SXRlbXMoKTtcbiAgfSlcbiAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coXCJFcnJvciBmcm9tIGdldFNlcnZlckltYWdlczpcIiwgZXJyb3IpKTtcbn0pXG4uY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhcIkVycm9yIGZyb20gZ2V0UHJvZmlsZUluZm86XCIsIGVycm9yKSk7XG5cbmNvbnN0IGRlbGV0ZUNhcmRBbGVydCA9IG5ldyBQb3B1cEFsZXJ0RGVsZXRlKFwiLnBvcHVwX2FsZXJ0LWRlbGV0ZVwiKTtcbmRlbGV0ZUNhcmRBbGVydC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBsYXJnZUltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfbGFyZ2UtaW1hZ2VcIik7XG5cbmZ1bmN0aW9uIG9wZW5MYXJnZUltYWdlUG9wdXAobmFtZSwgbGluaykge1xuICBsYXJnZUltYWdlUG9wdXAub3BlbihuYW1lLCBsaW5rKTtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVDYXJkV2l0aEltYWdlKGltYWdlT2JqZWN0KSB7XG4gIGNvbnN0IGltYWdlRWxlbWVudCA9IG5ldyBDYXJkKHVzZXJJRCwgaW1hZ2VPYmplY3QsIFwiI2ltYWdlLXRlbXBsYXRlXCIsIHtcbiAgICBoYW5kbGVDYXJkQ2xpY2s6IG9wZW5MYXJnZUltYWdlUG9wdXAsXG4gICAgaGFuZGxlQWRkTGlrZTogKGlkKSA9PiB7XG4gICAgICBhcGkubGlrZUNhcmQoaWQpXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICBpbWFnZUVsZW1lbnQudG9nZ2xlTGlrZShyZXMubGlrZXMubGVuZ3RoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coXCJFcnJvciBmcm9tIGxpa2VDYXJkOlwiLCBlcnJvcikpO1xuICAgIH0sXG4gICAgaGFuZGxlUmVtb3ZlTGlrZTogKGlkKSA9PiB7XG4gICAgICBhcGkudW5MaWtlQ2FyZChpZClcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgIGltYWdlRWxlbWVudC50b2dnbGVMaWtlKHJlcy5saWtlcy5sZW5ndGgpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhcIkVycm9yIGZyb20gdW5MaWtlQ2FyZDpcIiwgZXJyb3IpKTtcbiAgICB9LFxuICAgIGhhbmRsZUJpbkNsaWNrOiAoaWQpID0+IHtcbiAgICAgIGRlbGV0ZUNhcmRBbGVydC5vcGVuKCk7XG4gICAgICBkZWxldGVDYXJkQWxlcnQuc3VibWl0UmVxdWVzdCgoKSA9PiB7XG4gICAgICAgIGFwaS5kZWxldGVJbWFnZShpZClcbiAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgaW1hZ2VFbGVtZW50LmRlbGV0ZUNhcmQoKTtcbiAgICAgICAgICAgZGVsZXRlQ2FyZEFsZXJ0LmNsb3NlKCk7XG4gICAgICAgICB9KVxuICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coXCJFcnJvciBmcm9tIGRlbGV0ZUltYWdlOlwiLCBlcnJvcikpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgfSk7XG4gIHJldHVybiBpbWFnZUVsZW1lbnQuZ2VuZXJhdGVDYXJkKCk7XG59XG5cbmNvbnN0IGluaXRpYXRlSW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX2FkZC1pbWFnZVwiLFxue1xuICBzdWJtaXRIYW5kbGVyOiAoaW1hZ2VEYXRhKSA9PiB7XG4gICAgYXBpLmFkZE5ld0ltYWdlKGltYWdlRGF0YSlcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBzZXJ2ZXIuYWRkSXRlbShnZW5lcmF0ZUNhcmRXaXRoSW1hZ2UocmVzKSk7XG4gICAgICBpbml0aWF0ZUltYWdlUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKFwiRXJyb3IgZnJvbSBhZGROZXdJbWFnZTpcIiwgZXJyb3IpKVxuICAgIC5maW5hbGx5KCgpID0+IGluaXRpYXRlSW1hZ2VQb3B1cC5yZW5kZXJQcm9ncmVzcyhmYWxzZSkpO1xuICB9XG59KTtcblxuY29uc3QgaW5pdGlhdGVQcm9maWxlSW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX2VkaXQtcHJvZmlsZS1pbWFnZVwiLFxue1xuICBzdWJtaXRIYW5kbGVyOiAobGluaykgPT4ge1xuICAgIGFwaS5lZGl0UHJvZmlsZUltYWdlKGxpbmspXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcbiAgICAgIGluaXRpYXRlUHJvZmlsZUltYWdlUG9wdXAuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKFwiRXJyb3IgZnJvbSBlZGl0UHJvZmlsZUltYWdlOlwiLCBlcnJvcikpXG4gICAgLmZpbmFsbHkoKCkgPT4gaW5pdGlhdGVQcm9maWxlSW1hZ2VQb3B1cC5yZW5kZXJQcm9ncmVzcyhmYWxzZSkpO1xuICB9XG59KTtcblxuaW5pdGlhdGVQcm9maWxlSW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5lZGl0UHJvZmlsZUltYWdlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaWRQcm9maWxlSW1hZ2Vmb3JtVmFsaWRhdG9yLmNsZWFyVmFsaWRhdGlvbkVycm9ycygpO1xuICBlZGlkUHJvZmlsZUltYWdlZm9ybVZhbGlkYXRvci50b2dnbGVTdWJtaXRTdGF0ZSgpO1xuXG4gIGluaXRpYXRlUHJvZmlsZUltYWdlUG9wdXAub3BlbigpO1xufSk7XG5cbmluaXRpYXRlSW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5hZGRJbWFnZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRJbWFnZWZvcm1WYWxpZGF0b3IuY2xlYXJWYWxpZGF0aW9uRXJyb3JzKCk7XG4gIGFkZEltYWdlZm9ybVZhbGlkYXRvci50b2dnbGVTdWJtaXRTdGF0ZSgpO1xuICBcbiAgaW5pdGlhdGVJbWFnZVBvcHVwLm9wZW4oKTtcbn0pO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIHVzZXJOYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcbiAgdXNlckFib3V0U2VsZWN0b3I6IFwiLnByb2ZpbGVfX29jY3VwYXRpb25cIixcbiAgdXNlckltYWdlU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2ltYWdlXCJcbn0pO1xuXG5jb25zdCBpbml0aWF0ZVByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX3Byb2ZpbGVcIiwge1xuICBzdWJtaXRIYW5kbGVyOiAodXNlcklucHV0cykgPT4ge1xuICAgIGFwaS5zZXRQcm9maWxlSW5mbyh1c2VySW5wdXRzKVxuICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcyk7XG4gICAgICBpbml0aWF0ZVByb2ZpbGVQb3B1cC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coXCJFcnJvciBmcm9tIHNldFByb2ZpbGVJbmZvOlwiLCBlcnJvcikpXG4gICAgLmZpbmFsbHkoKCkgPT4gaW5pdGlhdGVQcm9maWxlUG9wdXAucmVuZGVyUHJvZ3Jlc3MoZmFsc2UpKTtcbiAgfSxcbn0pO1xuXG5pbml0aWF0ZVByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5lZGl0UHJvZmlsZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjb25zdCBjdXJyZW50SW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHVzZXJOYW1lSW5wdXQudmFsdWUgPSBjdXJyZW50SW5mby5uYW1lO1xuICB1c2VyQWJvdXRJbnB1dC52YWx1ZSA9IGN1cnJlbnRJbmZvLmFib3V0O1xuXG4gIGVkaWRQcm9maWxlZm9ybVZhbGlkYXRvci5jbGVhclZhbGlkYXRpb25FcnJvcnMoKTtcbiAgZWRpZFByb2ZpbGVmb3JtVmFsaWRhdG9yLnRvZ2dsZVN1Ym1pdFN0YXRlKCk7XG5cbiAgaW5pdGlhdGVQcm9maWxlUG9wdXAub3BlbigpO1xufSk7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9IGVsc2Uge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuc3RhdHVzVGV4dCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0UHJvZmlsZUluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSlcbiAgfVxuXG4gIGdldFNlcnZlckltYWdlcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKVxuICB9XG5cbiAgc2V0UHJvZmlsZUluZm8oZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogZGF0YS5mdWxsTmFtZSxcbiAgICAgICAgYWJvdXQ6IGRhdGEuYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSlcbiAgfVxuXG4gIGFkZE5ld0ltYWdlKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogZGF0YS5pbWFnZVRpdGxlLFxuICAgICAgICBsaW5rOiBkYXRhLmltYWdlTGluayxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKVxuICB9XG5cbiAgZGVsZXRlSW1hZ2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgfSlcbiAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpXG4gIH1cblxuICBsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICB9KVxuICAgIC50aGVuKChyZXMpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSlcbiAgfVxuXG4gIHVuTGlrZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgfSlcbiAgICAudGhlbigocmVzKSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpXG4gIH1cblxuICBlZGl0UHJvZmlsZUltYWdlKGxpbmspIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGxpbmsuYXZhdGFyTGluayxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKVxuICB9XG59IiwiZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LXByb2ZpbGVcIik7XG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVJbWFnZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBhZGRJbWFnZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLXBob3RvXCIpO1xuXG5jb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcblxuZXhwb3J0IGNvbnN0IHVzZXJOYW1lSW5wdXQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X2NvbnRlbnRfZnVsbC1uYW1lXCIpO1xuZXhwb3J0IGNvbnN0IHVzZXJBYm91dElucHV0ID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF9jb250ZW50X2Fib3V0XCIpO1xuXG5leHBvcnQgY29uc3QgZm9ybXNTZXR0aW5ncyA9IHtcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fc3VibWl0XCIsXG4gIGVycm9yTWVzc2FnZVNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXQtZXJyb3ItbXNnXCIsXG4gIHN1Ym1pdEJ1dHRvbkluYWN0aXZlQ2xhc3M6IFwicG9wdXBfX3N1Ym1pdF9pbmFjdGl2ZVwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JNZXNzYWdlQ2xhc3M6IFwicG9wdXBfX2lucHV0LWVycm9yLW1zZ1wiLFxuICBlcnJvck1lc3NhZ2VDbGFzc0FjdGl2ZTogXCJwb3B1cF9faW5wdXQtZXJyb3ItbXNnX2FjdGl2ZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3Byb2ZpbGUtZm9ybVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlSW1hZ2VGb3JtRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2VkaXQtcHJvZmlsZS1pbWFnZS1mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IGltYWdlRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19hZGQtaW1hZ2UtZm9ybVwiKTsiXSwibmFtZXMiOlsiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsInRoaXMiLCJfaXRlbXMiLCJBcnJheSIsImZyb20iLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZm9yRWFjaCIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImV2dCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiX3BvcHVwRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlRXNjQ2xvc2UiLCJfaGFuZGxlT3ZlcmxheUNsb3NlIiwiX2hhbmRsZUJ1dHRvbkNsb3NlIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEltYWdlIiwibmFtZSIsImxpbmsiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRIYW5kbGVyIiwicmVuZGVyUHJvZ3Jlc3MiLCJfc3VibWl0SGFuZGxlciIsIl9nZXRJbnB1dFZhbHVlcyIsIl9mb3JtRWxlbWVudCIsIl9zdWJtaXRCdXR0b24iLCJ2YWx1ZSIsImlucHV0c0xpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInJlc3VsdCIsInJlc2V0IiwiX3N1Ym1pdFRoaXNGb3JtIiwiVXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckFib3V0U2VsZWN0b3IiLCJ1c2VySW1hZ2VTZWxlY3RvciIsIl91c2VyTmFtZUVsZW1lbnQiLCJfdXNlckFib3V0RWxlbWVudCIsIl91c2VySW1hZ2VFbGVtZW50IiwiYWJvdXQiLCJhdmF0YXIiLCJ1c2VyRGF0YSIsIkNhcmQiLCJ1c2VySUQiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQmluQ2xpY2siLCJoYW5kbGVBZGRMaWtlIiwiaGFuZGxlUmVtb3ZlTGlrZSIsIl9saW5rIiwiX25hbWUiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVCaW5DbGljayIsIl9oYW5kbGVBZGRMaWtlIiwiX2hhbmRsZVJlbW92ZUxpa2UiLCJfY2FyZElEIiwiX2lkIiwiX2NhcmRPd25lcklEIiwib3duZXIiLCJfbGlrZXMiLCJsaWtlcyIsIl91c2VySUQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2l0ZW0iLCJfZ2V0Q2FyZFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwibGVuZ3RoIiwic29tZSIsInNvbWVMaWtlIiwidG9nZ2xlTGlrZSIsImxpa2VzTnVtYmVyIiwidG9nZ2xlIiwiY29udGFpbnMiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybXNTZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX3N1Ym1pdEJ1dHRvbkluYWN0aXZlQ2xhc3MiLCJzdWJtaXRCdXR0b25JbmFjdGl2ZUNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvck1lc3NhZ2VDbGFzc0FjdGl2ZSIsImVycm9yTWVzc2FnZUNsYXNzQWN0aXZlIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5wdXRMaXN0IiwiaW5wdXRTZWxlY3RvciIsIl9lcnJvckxpc3QiLCJlcnJvck1lc3NhZ2VTZWxlY3RvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2NoZWNrRm9ybUludmFsaWRpdHkiLCJkaXNhYmxlZCIsIl9jaGVja0lucHV0c1ZhbGlkaXR5IiwidG9nZ2xlU3VibWl0U3RhdGUiLCJlcnJvciIsInByZXZlbnREZWZhdWx0IiwiX3NldEZvcm1TdGF0ZSIsIlBvcHVwQWxlcnREZWxldGUiLCJzZXJ2ZXJSZXNwb25zZSIsIl9pbml0aWF0ZVN1Ym1pdCIsInNlcnZlciIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXNUZXh0IiwiZmV0Y2giLCJ0aGVuIiwiX2NoZWNrUmVzcG9uc2UiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImZ1bGxOYW1lIiwiaW1hZ2VUaXRsZSIsImltYWdlTGluayIsImNhcmRJZCIsImF2YXRhckxpbmsiLCJlZGl0UHJvZmlsZUJ0biIsImVkaXRQcm9maWxlSW1hZ2VCdG4iLCJhZGRJbWFnZUJ0biIsImZvcm0iLCJ1c2VyTmFtZUlucHV0IiwidXNlckFib3V0SW5wdXQiLCJlcnJvck1lc3NhZ2VDbGFzcyIsInByb2ZpbGVGb3JtRWxlbWVudCIsInByb2ZpbGVJbWFnZUZvcm1FbGVtZW50IiwiaW1hZ2VGb3JtRWxlbWVudCIsImVkaWRQcm9maWxlZm9ybVZhbGlkYXRvciIsImVkaWRQcm9maWxlSW1hZ2Vmb3JtVmFsaWRhdG9yIiwiYWRkSW1hZ2Vmb3JtVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsImFwaSIsImF1dGhvcml6YXRpb24iLCJnZXRQcm9maWxlSW5mbyIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJnZXRTZXJ2ZXJJbWFnZXMiLCJpbWFnZUl0ZW0iLCJhZGRJdGVtIiwiZ2VuZXJhdGVDYXJkV2l0aEltYWdlIiwiY29uc3RydWN0SXRlbXMiLCJjYXRjaCIsImNvbnNvbGUiLCJsb2ciLCJkZWxldGVDYXJkQWxlcnQiLCJzZXRFdmVudExpc3RlbmVycyIsImxhcmdlSW1hZ2VQb3B1cCIsIm9wZW5MYXJnZUltYWdlUG9wdXAiLCJvcGVuIiwiaW1hZ2VPYmplY3QiLCJpbWFnZUVsZW1lbnQiLCJsaWtlQ2FyZCIsInVuTGlrZUNhcmQiLCJzdWJtaXRSZXF1ZXN0IiwiZGVsZXRlSW1hZ2UiLCJkZWxldGVDYXJkIiwiZ2VuZXJhdGVDYXJkIiwiaW5pdGlhdGVJbWFnZVBvcHVwIiwiaW1hZ2VEYXRhIiwiYWRkTmV3SW1hZ2UiLCJmaW5hbGx5IiwiaW5pdGlhdGVQcm9maWxlSW1hZ2VQb3B1cCIsImVkaXRQcm9maWxlSW1hZ2UiLCJjbGVhclZhbGlkYXRpb25FcnJvcnMiLCJpbml0aWF0ZVByb2ZpbGVQb3B1cCIsInVzZXJJbnB1dHMiLCJzZXRQcm9maWxlSW5mbyIsImN1cnJlbnRJbmZvIiwiZ2V0VXNlckluZm8iXSwic291cmNlUm9vdCI6IiJ9